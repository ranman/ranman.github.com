<!DOCTYPE html>
<html>
<head>
<script src="../../scripts/jquery.min.js"></script>
<script src="../../scripts/jquery.easing.js"></script>
<script src="../../scripts/jquery-css-transform.js"></script>
<script src="../../scripts/jquery-animate-css-rotate-scale.js"></script>
<script src="../../scripts/jquery.quicksand.js"></script>
<style type="text/css">
#translatedText { display: none }
</style>
<script type="text/javascript">
var API_KEY = 'AIzaSyBIFRz6sfJ1wq7LqykoXeYA3R37Wt5KM9o'
var API_URL = 'https://www.googleapis.com/language/translate/v2'
function injector(t, splitter) {
    var letter_array = t.text().split(splitter), inject = '', dict = {};
    if (letter_array.length) {
        $(letter_array).each(function(i, item) {
            if (item in dict) {
                dict[item]++;
            } else {
                dict[item] = 0;
            }
            inject += '<span data-id="'+item.charCodeAt(0)+'_'+dict[item]+'">'+item+'</span>';
        });
        t.empty().append(inject);
    }
}

$(document).ready(function() {
    function updateText() {
        $('#inputBoxText').empty().append(escape($('#inputBox').val()));
    }
    var interval_id = window.setInterval(updateText, 1000);
    $('#inputBox').bind('keyup', updateText);
    $('#translateButton').click(function(e) {
        window.clearInterval(interval_id);
        $.getJSON(API_URL+'?key='+API_KEY+'&callback=?&source=en&target=de&q=' + escape($('#inputBoxText').html()),
            function(data) {
                $('#translatedText').empty().append(data.data.translations[0].translatedText);
                injector($('#inputBoxText'), '');
                injector($('#translatedText'), ''); 
                $('#inputBoxText').quicksand( $('#translatedText span'), {
                    duration: 1000,
                    easing: 'easeInOutQuad',
                    useScaling: true,
                });
            }
        );
        e.preventDefault();
    });
});
</script>
</head>
<body>
<p>Type Here: <input id='inputBox' type="text"></input></p>
<h2 id="inputBoxText"></h2>
<h2 id="translatedText"></h2>
<input id="translateButton" type="button" value="Translate"></input>
</body>
</html>
